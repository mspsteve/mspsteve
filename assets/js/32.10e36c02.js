(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{174:function(s,t,a){s.exports=a.p+"assets/img/jvm-5.47c8429f.png"},175:function(s,t,a){s.exports=a.p+"assets/img/jvm-5.1.17e2a305.png"},196:function(s,t,a){"use strict";a.r(t);var n=[function(){var s=this,t=s.$createElement,n=s._self._c||t;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"jvm异常处理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#jvm异常处理","aria-hidden":"true"}},[s._v("#")]),s._v(" jvm异常处理")]),s._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#基本概念"}},[s._v("基本概念")])]),n("li",[n("a",{attrs:{href:"#异常捕获流程"}},[s._v("异常捕获流程")])]),n("li",[n("a",{attrs:{href:"#原理"}},[s._v("原理")]),n("ul",[n("li",[n("a",{attrs:{href:"#异常实例构造"}},[s._v("异常实例构造")])]),n("li",[n("a",{attrs:{href:"#实现原理"}},[s._v("实现原理")])])])]),n("li",[n("a",{attrs:{href:"#java7的supressed异常以及语法糖"}},[s._v("java7的Supressed异常以及语法糖")]),n("ul",[n("li",[n("a",{attrs:{href:"#supressed异常"}},[s._v("Supressed异常")])])])])])]),n("p"),s._v(" "),n("h2",{attrs:{id:"基本概念"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基本概念","aria-hidden":"true"}},[s._v("#")]),s._v(" 基本概念")]),s._v(" "),n("p",[s._v("  所有异常都是Throwable类或者其子类的实例。Throwable有两大之类:"),n("code",[s._v("Error")]),s._v("涵盖程序不应捕获的异常,当程序触发"),n("code",[s._v("Error")]),s._v("时，\n它的执行状态已经无法恢复，需要中止线程甚至是中止虚拟机。"),n("code",[s._v("Exception")]),s._v("涵盖程序可能需要捕获并且处理的异常。具体如下图：\n"),n("img",{attrs:{src:a(174),alt:"jvm异常处理-1"}})]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("Exception 有一个特殊的子类"),n("code",[s._v("RuntimeException")]),s._v(",用来表示“程序虽然无法继续执行，但是还能抢救一下”的情况.")])]),s._v(" "),n("p",[n("code",[s._v("RuntimeException")]),s._v("和"),n("code",[s._v("Error")]),s._v("属于java里的非检查异常（"),n("code",[s._v("unchecked exception")]),s._v("），其他异常则属于检查异常（"),n("code",[s._v("checked exception")]),s._v("）。\ncheck异常需要程序显式捕获或者在方法声明中用throws关键字标注。通常情况，自定义异常通常为检查异常。")]),s._v(" "),n("h2",{attrs:{id:"异常捕获流程"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#异常捕获流程","aria-hidden":"true"}},[s._v("#")]),s._v(" 异常捕获流程")]),s._v(" "),n("ul",[n("li",[s._v("try代码块：用来标记需要进行异常监控的代码。")]),s._v(" "),n("li",[s._v("catch代码块：跟在try代码块之后，用来捕获在try代码块中触发的某种指定类型的异常。")])]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("  除了声明所捕获异常的类型之外，catch代码块还定义了针对对该异常类型的异常处理器。在java中，try代码块后面可以跟着多个catch代\n码块，来捕获不同类型的异常。java虚拟机会从上至下匹配异常处理器。因此，前面的catch代码块所捕获的异常类型不能覆盖后边的，否则编译器会报错。")])]),s._v(" "),n("ul",[n("li",[s._v("finally代码块：跟在try代码块和catch代码块之后，用来声明一段必定运行的代码。它的设计初衷是为了避免跳过某些关键的清理代码，例如关闭已打开的系统资源。")])]),s._v(" "),n("h2",{attrs:{id:"原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#原理","aria-hidden":"true"}},[s._v("#")]),s._v(" 原理")]),s._v(" "),n("h3",{attrs:{id:"异常实例构造"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#异常实例构造","aria-hidden":"true"}},[s._v("#")]),s._v(" 异常实例构造")]),s._v(" "),n("p",[s._v("  java虚拟机在构造异常实例时需要生成该异常的栈轨迹（"),n("code",[s._v("stack trace")]),s._v("）。该操作会逐一访问当前线程的java栈帧，并且记录下各种调试信息，\n包括栈帧所指向的方法的名字，方法所在的类名、文件名，以及在代码中的第几行触发该异常。生成栈轨迹时,java虚拟机会忽略掉异常构造器以及填充栈帧的java方法\n（"),n("code",[s._v("Throwable.fillInStackTrace")]),s._v("）,直接从新建异常位置开始算起。此外，java虚拟机还会忽略标记为不可见的java方法栈帧。异常栈的内容如下：")]),s._v(" "),n("ul",[n("li",[s._v("异常栈以FILO的顺序打印，位于打印内容最下方的异常最早被抛出，逐渐导致上方异常被抛出。")])]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("位于打印内容最上方的异常最晚被抛出，且没有再被捕获。从上到下数，第i+1个异常是第i个异常被抛出的原因"),n("code",[s._v("cause")]),s._v("，以"),n("code",[s._v("Caused by")]),s._v("开头。")])]),s._v(" "),n("ul",[n("li",[s._v("异常栈中每个异常都由异常名+细节信息+路径组成。")])]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("异常名从行首开始（或紧随"),n("code",[s._v("Caused by")]),s._v("），紧接着是细节信息（为增强可读性，需要提供恰当的细节信息），从下一行开始，跳过一个制表符，就是路径中的一个位置，一行一个位置。")])]),s._v(" "),n("ul",[n("li",[s._v("路径以FIFO的顺序打印，位于打印内容最上方的位置最早被该异常经过，逐层向外抛出。")])]),s._v(" "),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("最早经过的位置即是异常被抛出的位置，逆向debug时可从此处开始；后续位置一般是方法调用的入口，java虚拟机捕获异常时可以从方法栈中得到。\n对于"),n("code",[s._v("cause")]),s._v("，其可打印的路径截止到被包装进下一个异常之前，之后打印“… 6 more”，表示"),n("code",[s._v("cause")]),s._v("作为被包装异常，在这之后还逐层向外经过了6个位置，但这些位置与包装异常的路径重复，\n所以在此处省略，而在包装异常的路径中打印。")])]),s._v(" "),n("h3",{attrs:{id:"实现原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#实现原理","aria-hidden":"true"}},[s._v("#")]),s._v(" 实现原理")]),s._v(" "),n("p",[s._v("  在编译生成的字节码中，每个方法都附带一个异常表。异常表中的每一个条目都代表一个异常处理器，并且由"),n("code",[s._v("from指令")]),s._v("、"),n("code",[s._v("to指令")]),s._v("、"),n("code",[s._v("target指令")]),s._v("以及所捕获的异常类型构成。\n这些指针的值是字节码索引（"),n("code",[s._v("bytecode index")]),s._v(", "),n("code",[s._v("bci")]),s._v("），用以定位字节码。"),n("br"),s._v("\n  其中，from指针和to指针标示了该异常处理器所监控的范围，例如try代码所覆盖的范围。target指针则指向异常处理器的起始位置。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("main")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token function"}},[s._v("mayThrowException")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Exception e"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        e"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("printStackTrace")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("//对应的Java字节码")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("main")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("java"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("String"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    Code"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        "),n("span",{attrs:{class:"token number"}},[s._v("0")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokestatic mayThrowException"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("V\n        "),n("span",{attrs:{class:"token number"}},[s._v("3")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("goto")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("11")]),s._v("\n        "),n("span",{attrs:{class:"token number"}},[s._v("6")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" astore_1\n        "),n("span",{attrs:{class:"token number"}},[s._v("7")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_1\n        "),n("span",{attrs:{class:"token number"}},[s._v("8")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokevirtual java"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Exception"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("printStackTrace\n       "),n("span",{attrs:{class:"token number"}},[s._v("11")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n     Exception table"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("\n        from    to    target    type\n          "),n("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),n("span",{attrs:{class:"token number"}},[s._v("3")]),s._v("     "),n("span",{attrs:{class:"token number"}},[s._v("6")]),s._v("         Class "),n("span",{attrs:{class:"token class-name"}},[s._v("java")]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("Exception "),n("span",{attrs:{class:"token comment"}},[s._v("//异常表条目")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br")])]),n("p",[s._v("  当程序触发异常时，java虚拟机会从上至下遍历异常表中的所有条目。当触发异常的字节码的索引值在某个异常表监控范围内，java虚拟机会判断所抛出的异常和该条目想要捕获的异常是否匹配。\n如果匹配，java虚拟机会将控制流转移至该条目"),n("code",[s._v("target")]),s._v("指针指向的字节码。"),n("br"),s._v("\n  如果遍历完所有异常表条目，java虚拟机仍未匹配到异常处理器，那么它会弹出当前方法对应的java栈帧,并且在调用者("),n("code",[s._v("caller")]),s._v(")中重复上述操作。\n在最坏情况下，java虚拟机需要遍历当前线程java栈上所有方法的异常表。"),n("br"),s._v(" "),n("code",[s._v("finally")]),s._v("代码块的编译比较复杂。当前版本Java编译器的做法，是复制"),n("code",[s._v("finally")]),s._v("代码块的内容，分别放在"),n("code",[s._v("try-catch")]),s._v("代码块所有正常执行路径以及异常执行路径的出口中。具体见下图：\n"),n("img",{attrs:{src:a(175),alt:"jvm异常处理-2"}}),s._v("\n  针对异常执行路径，java编译器会生成一个或多个异常表条目，监控整个"),n("code",[s._v("try-catch")]),s._v("代码块，并且捕获所有种类的异常（在"),n("code",[s._v("javap")]),s._v("中以"),n("code",[s._v("any")]),s._v("指代）。\n这些异常表条目的"),n("code",[s._v("target")]),s._v("指针将指向另一份复制的"),n("code",[s._v("finally")]),s._v("代码块。并且在"),n("code",[s._v("finally")]),s._v("代码块的最后，java编译器会重新抛出所捕获的异常。")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Foo")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" tryBlock"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" catchBlock"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" finallyBlock"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("int")]),s._v(" methodExit"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("test")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      tryBlock "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("0")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token class-name"}},[s._v("Exception")]),s._v(" e"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      catchBlock "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("finally")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      finallyBlock "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("2")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    methodExit "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token number"}},[s._v("3")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{attrs:{class:"token comment"}},[s._v("//使用javap 查询字节码")]),s._v("\nCompiled from "),n("span",{attrs:{class:"token string"}},[s._v('"Foo.java"')]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Foo")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("Foo")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    Code"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       "),n("span",{attrs:{class:"token number"}},[s._v("0")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n       "),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" invokespecial #"),n("span",{attrs:{class:"token number"}},[s._v("1")]),s._v("                  "),n("span",{attrs:{class:"token comment"}},[s._v('// Method java/lang/Object."<init>":()V')]),s._v("\n       "),n("span",{attrs:{class:"token number"}},[s._v("4")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n\n  "),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("test")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    Code"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       "),n("span",{attrs:{class:"token number"}},[s._v("0")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n       "),n("span",{attrs:{class:"token number"}},[s._v("1")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_0\n       "),n("span",{attrs:{class:"token number"}},[s._v("2")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" putfield      #"),n("span",{attrs:{class:"token number"}},[s._v("2")]),s._v("                  "),n("span",{attrs:{class:"token comment"}},[s._v("// Field tryBlock:I")]),s._v("\n       "),n("span",{attrs:{class:"token number"}},[s._v("5")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n       "),n("span",{attrs:{class:"token number"}},[s._v("6")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_2\n       "),n("span",{attrs:{class:"token number"}},[s._v("7")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" putfield      #"),n("span",{attrs:{class:"token number"}},[s._v("3")]),s._v("                  "),n("span",{attrs:{class:"token comment"}},[s._v("// Field finallyBlock:I")]),s._v("\n      "),n("span",{attrs:{class:"token number"}},[s._v("10")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("goto")]),s._v("          "),n("span",{attrs:{class:"token number"}},[s._v("35")]),s._v("\n      "),n("span",{attrs:{class:"token number"}},[s._v("13")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" astore_1\n      "),n("span",{attrs:{class:"token number"}},[s._v("14")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n      "),n("span",{attrs:{class:"token number"}},[s._v("15")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_1\n      "),n("span",{attrs:{class:"token number"}},[s._v("16")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" putfield      #"),n("span",{attrs:{class:"token number"}},[s._v("5")]),s._v("                  "),n("span",{attrs:{class:"token comment"}},[s._v("// Field catchBlock:I")]),s._v("\n      "),n("span",{attrs:{class:"token number"}},[s._v("19")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n      "),n("span",{attrs:{class:"token number"}},[s._v("20")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_2\n      "),n("span",{attrs:{class:"token number"}},[s._v("21")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" putfield      #"),n("span",{attrs:{class:"token number"}},[s._v("3")]),s._v("                  "),n("span",{attrs:{class:"token comment"}},[s._v("// Field finallyBlock:I")]),s._v("\n      "),n("span",{attrs:{class:"token number"}},[s._v("24")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("goto")]),s._v("          "),n("span",{attrs:{class:"token number"}},[s._v("35")]),s._v("\n      "),n("span",{attrs:{class:"token number"}},[s._v("27")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" astore_2\n      "),n("span",{attrs:{class:"token number"}},[s._v("28")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n      "),n("span",{attrs:{class:"token number"}},[s._v("29")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_2\n      "),n("span",{attrs:{class:"token number"}},[s._v("30")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" putfield      #"),n("span",{attrs:{class:"token number"}},[s._v("3")]),s._v("                  "),n("span",{attrs:{class:"token comment"}},[s._v("// Field finallyBlock:I")]),s._v("\n      "),n("span",{attrs:{class:"token number"}},[s._v("33")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_2\n      "),n("span",{attrs:{class:"token number"}},[s._v("34")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" athrow\n      "),n("span",{attrs:{class:"token number"}},[s._v("35")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" aload_0\n      "),n("span",{attrs:{class:"token number"}},[s._v("36")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" iconst_3\n      "),n("span",{attrs:{class:"token number"}},[s._v("37")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" putfield      #"),n("span",{attrs:{class:"token number"}},[s._v("6")]),s._v("                  "),n("span",{attrs:{class:"token comment"}},[s._v("// Field methodExit:I")]),s._v("\n      "),n("span",{attrs:{class:"token number"}},[s._v("40")]),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("return")]),s._v("\n    Exception table"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v("\n       from    to  target type\n           "),n("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),n("span",{attrs:{class:"token number"}},[s._v("5")]),s._v("    "),n("span",{attrs:{class:"token number"}},[s._v("13")]),s._v("   Class "),n("span",{attrs:{class:"token class-name"}},[s._v("java")]),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("lang"),n("span",{attrs:{class:"token operator"}},[s._v("/")]),s._v("Exception\n           "),n("span",{attrs:{class:"token number"}},[s._v("0")]),s._v("     "),n("span",{attrs:{class:"token number"}},[s._v("5")]),s._v("    "),n("span",{attrs:{class:"token number"}},[s._v("27")]),s._v("   any\n          "),n("span",{attrs:{class:"token number"}},[s._v("13")]),s._v("    "),n("span",{attrs:{class:"token number"}},[s._v("19")]),s._v("    "),n("span",{attrs:{class:"token number"}},[s._v("27")]),s._v("   any\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br")])]),n("div",{staticClass:"tip custom-block"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("字节码编译结果包含三份"),n("code",[s._v("finally")]),s._v("代码块。其中，前两份分别位于"),n("code",[s._v("try")]),s._v("代码块和"),n("code",[s._v("catch")]),s._v("代码块的正常执行路径出口。\n最后一份则作为异常处理器，监控"),n("code",[s._v("try")]),s._v("代码块以及"),n("code",[s._v("catch")]),s._v("代码块。它将捕获"),n("code",[s._v("try")]),s._v("代码块触发的、未被"),n("code",[s._v("catch")]),s._v("代码块捕获的异常，以及"),n("code",[s._v("catch")]),s._v("代码块触发的异常。")])]),s._v(" "),n("div",{staticClass:"warning custom-block"},[n("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),n("p",[s._v("如果catch代码块捕获了异常，并且触发了另一个异常，那么finally捕获并且重拋的异常是哪个呢？\n答案是后者。也就是说原本的异常便会被忽略掉，这对于代码调试来说十分不利。")])]),s._v(" "),n("h2",{attrs:{id:"java7的supressed异常以及语法糖"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#java7的supressed异常以及语法糖","aria-hidden":"true"}},[s._v("#")]),s._v(" java7的Supressed异常以及语法糖")]),s._v(" "),n("h3",{attrs:{id:"supressed异常"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#supressed异常","aria-hidden":"true"}},[s._v("#")]),s._v(" Supressed异常")]),s._v(" "),n("p",[s._v("  Supressed异常新特性允许开发人员将一个异常附于另一个异常之上。因此，抛出的异常可以附带多个异常信息。\n然而，"),n("code",[s._v("finally")]),s._v("代码块缺少指向所捕获异常的引用，所以这个新特性使用起来十分繁琐。java7专门构造了一个名为"),n("code",[s._v("try-with-resources")]),s._v("的语法糖，\n在字节码层面自动使用Supressed异常。当然，该语法糖的主要目的并不是使用Supressed异常，而是精简资源打开关闭的用法。下面是java7 版本之前的资源关闭：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("FileInputStream in0 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" null"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFileInputStream in1 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" null"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\nFileInputStream in2 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" null"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    in0 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("FileInputStream")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("File")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"in0.txt"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        in1 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("FileInputStream")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("File")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"in1.txt"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            in2 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("FileInputStream")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("File")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"in2.txt"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("finally")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("in2 "),n("span",{attrs:{class:"token operator"}},[s._v("!=")]),s._v(" null"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                in2"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("close")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("finally")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("in1 "),n("span",{attrs:{class:"token operator"}},[s._v("!=")]),s._v(" null"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n            in1"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("close")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("finally")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token keyword"}},[s._v("if")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("in0 "),n("span",{attrs:{class:"token operator"}},[s._v("!=")]),s._v(" null"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        in0"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("close")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("p",[s._v("  java7的"),n("code",[s._v("try-with-resources")]),s._v("语法糖极大地简化了上述代码。程序可以在try关键字后声明并实例化实现了AutoCloseable接口类，编译器将自动添加对应的close()操作。\n在声明多个"),n("code",[s._v("AutoCloseable")]),s._v("实例的情况下，编译生成的字节码类似于上面手工编写代码的编译结果。与手工代码相比，try-with-resources还会使用Supressed异常的功能，来避免原异常“被消失”。\n代码如下：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Foo")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("AutoCloseable")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("final")]),s._v(" String name"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("Foo")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String name"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("this")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("name "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" name"),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\t"),n("span",{attrs:{class:"token annotation punctuation"}},[s._v("@Override")]),s._v("\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("close")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("RuntimeException")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("name"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\t"),n("span",{attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),n("span",{attrs:{class:"token function"}},[s._v("main")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("String"),n("span",{attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo foo0 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Foo")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"Foo0"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),n("span",{attrs:{class:"token comment"}},[s._v("//try-with-resources")]),s._v("\n\t\t\t Foo foo1 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Foo")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"Foo1"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t\t Foo foo2 "),n("span",{attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("Foo")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"Foo2"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t\t"),n("span",{attrs:{class:"token keyword"}},[s._v("throw")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),n("span",{attrs:{class:"token class-name"}},[s._v("RuntimeException")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token string"}},[s._v('"Initial"')]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),n("span",{attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\t"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br")])]),n("p",[s._v("  运行结果如下：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[s._v("javac Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java\njava Foo\nException in thread "),n("span",{attrs:{class:"token string"}},[s._v('"main"')]),s._v(" java"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RuntimeException"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" Initial\n\tat Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("main")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),n("span",{attrs:{class:"token number"}},[s._v("16")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tSuppressed"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" java"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RuntimeException"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" Foo2\n\t\tat Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("close")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),n("span",{attrs:{class:"token number"}},[s._v("9")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\tat Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("main")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),n("span",{attrs:{class:"token number"}},[s._v("17")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tSuppressed"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" java"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RuntimeException"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" Foo1\n\t\tat Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("close")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),n("span",{attrs:{class:"token number"}},[s._v("9")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\tat Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("main")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),n("span",{attrs:{class:"token number"}},[s._v("17")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\tSuppressed"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" java"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("lang"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("RuntimeException"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),s._v(" Foo0\n\t\tat Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("close")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),n("span",{attrs:{class:"token number"}},[s._v("9")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\t\tat Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token function"}},[s._v("main")]),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Foo"),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("java"),n("span",{attrs:{class:"token operator"}},[s._v(":")]),n("span",{attrs:{class:"token number"}},[s._v("17")]),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br")])]),n("p",[s._v("  try-with-resources语法糖之外，Java 7 还支持在同一catch代码块中捕获多种异常。实际实现非常简单，生成多个异常表条目即可。代码如下：")]),s._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{attrs:{class:"token comment"}},[s._v("//在同一 catch 代码块中捕获多种异常")]),s._v("\n"),n("span",{attrs:{class:"token keyword"}},[s._v("try")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),n("span",{attrs:{class:"token keyword"}},[s._v("catch")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("(")]),n("span",{attrs:{class:"token class-name"}},[s._v("SomeException")]),s._v(" "),n("span",{attrs:{class:"token operator"}},[s._v("|")]),s._v(" OtherException e"),n("span",{attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),n("span",{attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{attrs:{class:"token punctuation"}},[s._v(".")]),s._v("cle\n"),n("span",{attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])])])}],e=a(0),r=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},n,!1,null,null,null);r.options.__file="jvm异常处理.md";t.default=r.exports}}]);